// @preserve jQuery.floatThead 1.2.12dev - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2015 Misha Koryak
// @license MIT
!function(a){function b(a,b,c){if(8==j){var d=o.width(),e=h.debounce(function(){var a=o.width();d!=a&&(d=a,c())},a);o.on(b,e)}else o.on(b,h.debounce(c,a))}function c(a){window&&window.console&&window.console.log&&window.console.log("jQuery.floatThead: "+a)}function d(a){if(window.getComputedStyle)return parseFloat(getComputedStyle(a).getPropertyValue("width"));var b=a.getBoundingClientRect();return b.right-b.left}function e(){var b=a('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>');a("body").append(b);var c=b.innerWidth(),d=a("div",b).innerWidth();return b.remove(),c-d}function f(a){if(a.dataTableSettings)for(var b=0;b<a.dataTableSettings.length;b++){var c=a.dataTableSettings[b].nTable;if(a[0]==c)return!0}return!1}function g(a,b,c){var d=c?"outerWidth":"width";if(m&&a.css("max-width")){var e=0;c&&(e+=parseInt(a.css("borderLeft"),10),e+=parseInt(a.css("borderRight"),10));for(var f=0;f<b.length;f++)e+=b.get(f).offsetWidth;return e}return a[d]()}a.floatThead=a.floatThead||{},a.floatThead.defaults={cellTag:null,headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,debounceResizeMs:10,useAbsolutePositioning:!0,scrollingTop:0,scrollingBottom:0,scrollContainer:function(b){return a([])},getSizingRow:function(a,b,c){return a.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,enableAria:!1,autoReflow:!1,debug:!1};var h=window._,i="undefined"!=typeof MutationObserver,j=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];a=1+a,b.innerHTML="<!--[if gt IE "+a+"]><i><![endif]-->",c[0];);return a>4?a:document.documentMode}(),k=/Gecko\//.test(navigator.userAgent),l=/WebKit\//.test(navigator.userAgent),m=function(){if(l){var b=a('<div style="width:0px"><table style="max-width:100%"><tr><th><div style="min-width:100px;">X</div></th></tr></table></div>');a("body").append(b);var c=0==b.find("table").width();return b.remove(),c}return!1},n=!k&&!j,o=a(window);a.fn.floatThead=function(k){if(k=k||{},!h&&(h=window._||a.floatThead._,!h))throw new Error("jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore.");if(8>j)return this;var p=null;if(h.isFunction(m)&&(m=m()),h.isString(k)){var q=k,r=this;return this.filter("table").each(function(){var b=a(this).data("floatThead-attached");if(b&&h.isFunction(b[q])){var c=b[q]();"undefined"!=typeof c&&(r=c)}}),r}var s=a.extend({},a.floatThead.defaults||{},k);if(a.each(k,function(b,d){b in a.floatThead.defaults||!s.debug||c("Used ["+b+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+h.keys(a.floatThead.defaults).join(", "))}),s.debug){var t=a.fn.jquery.split(".");1==parseInt(t[0],10)&&parseInt(t[1],10)<=7&&c("jQuery version "+a.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}return this.filter(":not(."+s.floatTableClass+")").each(function(){function c(a){return a+".fth-"+D+".floatTHead"}function k(){var b=0;F.children("tr:visible").each(function(){b+=a(this).outerHeight(!0)}),da.outerHeight(b),ea.outerHeight(b)}function m(){var a=g(E,ha,!0),b=N.width()||a,c="hidden"!=N.css("overflow-y")?b-K.vertical:b;if(aa.width(c),O){var d=100*a/c;X.css("width",d+"%")}else X.outerWidth(a)}function q(){H=(h.isFunction(s.scrollingTop)?s.scrollingTop(E):s.scrollingTop)||0,I=(h.isFunction(s.scrollingBottom)?s.scrollingBottom(E):s.scrollingBottom)||0}function r(){var b,c;if($)b=Z.find("col").length;else{var d;if(d=null==s.cellTag&&s.headerCellSelector?s.headerCellSelector:"tr:first>"+s.cellTag,h.isNumber(d))return d;c=F.find(d),b=0,c.each(function(){b+=parseInt(a(this).attr("colspan")||1,10)})}if(b!=M){M=b;for(var e,f=[],g=[],i=[],j=0;b>j;j++)f.push(s.enableAria&&(e=c.eq(j).text())?'<th scope="col" class="floatThead-col">'+e+"</th>":'<th class="floatThead-col"/>'),g.push("<col/>"),i.push("<fthtd style='display:table-cell;height:0;width:auto;'/>");g=g.join(""),f=f.join(""),n&&(i=i.join(""),_.html(i),ha=_.find("fthtd")),da.html(f),ea=da.find("th"),$||Z.html(g),fa=Z.find("col"),Y.html(g),ga=Y.find("col")}return b}function t(){if(!J){if(J=!0,P){var a=g(E,ha),b=V.width();a>b&&E.css("minWidth",a)}E.css(ka),X.css(ka),X.append(F),G.before(ca),k()}}function u(){J&&(J=!1,P&&E.width(ma),ca.detach(),E.prepend(F),E.css(la),X.css(la),E.css("minWidth",na),E.css("minWidth",g(E,ha)))}function v(a){oa!=a&&(oa=a,E.triggerHandler("floatThead",[a,aa]))}function w(a){P!=a&&(P=a,aa.css({position:P?"absolute":"fixed"}))}function x(a,b,c,d){return n?c:d?s.getSizingRow(a,b,c):b}function y(){var a,b=r();return function(){fa=Z.find("col");var c=x(E,fa,ha,j);if(c.length==b&&b>0){if(!$)for(a=0;b>a;a++)fa.eq(a).css("width","");u();var e=[];for(a=0;b>a;a++)e[a]=d(c.get(a));for(a=0;b>a;a++)ga.eq(a).width(e[a]),fa.eq(a).width(e[a]);t()}else X.append(F),E.css(la),X.css(la),k()}}function z(a){var b=N.css("border-"+a+"-width"),c=0;return b&&~b.indexOf("px")&&(c=parseInt(b,10)),c}function A(){var a,b=N.scrollTop(),c=0,d=R?Q.outerHeight(!0):0,e=S?d:-d,f=aa.height(),g=E.offset(),h=0;if(O){var i=N.offset();c=g.top-i.top+b,R&&S&&(c+=d),h=z("left")}else a=g.top-H-f+I+K.horizontal;var j=o.scrollTop(),k=o.scrollLeft(),m=N.scrollLeft();return function(i){var n=E[0].offsetWidth<=0&&E[0].offsetHeight<=0;if(!n&&ba)return ba=!1,setTimeout(function(){E.triggerHandler("reflow")},1),null;if(n&&(ba=!0,!P))return null;if("windowScroll"==i?(j=o.scrollTop(),k=o.scrollLeft()):"containerScroll"==i?(b=N.scrollTop(),m=N.scrollLeft()):"init"!=i&&(j=o.scrollTop(),k=o.scrollLeft(),b=N.scrollTop(),m=N.scrollLeft()),!l||!(0>j||0>k)){if(W)w("windowScrollDone"==i?!0:!1);else if("windowScrollDone"==i)return null;g=E.offset(),R&&S&&(g.top+=d);var p,q,r=E.outerHeight();return O&&P?(b>c?(p=U?c:b,v(!0)):(p=c,v(!1)),q=h):!O&&P?(j>a+r+e?p=r-f+e:g.top>=j+H?(p=0,u(),v(!1)):(p=H+j-g.top+c+(S?d:0),t(),v(!0)),q=0):O&&!P?(c>b||b-c>r?(p=g.top-j,u(),v(!1)):(p=g.top+b-j-c,t(),v(!0)),q=g.left+m-k):O||P||(j>a+r+e?p=r+H-j+a+e:g.top>j+H?(p=g.top-j,t(),v(!1)):(p=H,v(!0)),q=g.left-k),{top:p,left:q}}}}function B(){var a=null,b=null,c=null;return function(d,e,f){null==d||a==d.top&&b==d.left||(aa.css({top:d.top,left:d.left}),a=d.top,b=d.left),e&&m(),f&&k();var g=N.scrollLeft();P&&c==g||(aa.scrollLeft(g),c=g)}}function C(){if(N.length)if(N.data().perfectScrollbar)K={horizontal:0,vertical:0};else{var a=N.width(),b=N.height(),c=E.height(),d=g(E,ha),e=d>a?L:0,f=c>b?L:0;K.horizontal=d>a-f?L:0,K.vertical=c>b-e?L:0}}var D=h.uniqueId(),E=a(this);if(E.data("floatThead-attached"))return!0;if(!E.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');i=s.autoReflow&&i;var F=E.children("thead:first"),G=E.children("tbody:first");if(0==F.length)throw new Error("jQuery.floatThead must be run on a table that contains a <thead> element");var H,I,J=!1,K={vertical:0,horizontal:0},L=e(),M=0,N=s.scrollContainer(E)||a([]),O=N.length>0,P=s.useAbsolutePositioning;null==P&&(P=O),P||(J=!0);var Q=E.find("caption"),R=1==Q.length;if(R)var S="top"===(Q.css("caption-side")||Q.attr("align")||"top");var T=a('<fthfoot style="display:table-footer-group;border-spacing:0;height:0;border-collapse:collapse;"/>'),U=!1,V=a([]),W=9>=j&&!O&&P,X=a("<table/>"),Y=a("<colgroup/>"),Z=E.children("colgroup:first"),$=!0;0==Z.length&&(Z=a("<colgroup/>"),$=!1);var _=a('<fthtr style="display:table-row;border-spacing:0;height:0;border-collapse:collapse"/>'),aa=a('<div style="overflow: hidden;" aria-hidden="true" class="floatThead-floatContainer"></div>'),ba=!1,ca=a("<thead/>"),da=a('<tr class="size-row"/>'),ea=a([]),fa=a([]),ga=a([]),ha=a([]);ca.append(da),E.prepend(Z),n&&(T.append(_),E.append(T)),X.append(Y),aa.append(X),s.copyTableClass&&X.attr("class",E.attr("class")),X.attr({cellpadding:E.attr("cellpadding"),cellspacing:E.attr("cellspacing"),border:E.attr("border")});var ia=E.css("display");if(X.css({borderCollapse:E.css("borderCollapse"),border:E.css("border"),display:ia}),"none"==ia&&(ba=!0),X.addClass(s.floatTableClass).css("margin",0),P){var ja=function(a,b){var c=a.css("position"),d="relative"==c||"absolute"==c;if(!d||b){var e={paddingLeft:a.css("paddingLeft"),paddingRight:a.css("paddingRight")};aa.css(e),a=a.wrap("<div class='"+s.floatWrapperClass+"' style='position: relative; clear:both;'></div>").parent(),U=!0}return a};O?(V=ja(N,!0),V.append(aa)):(V=ja(E),E.after(aa))}else E.after(aa);aa.css({position:P?"absolute":"fixed",marginTop:0,top:P?0:"auto",zIndex:s.zIndex}),aa.addClass(s.floatContainerClass),q();var ka={"table-layout":"fixed"},la={"table-layout":E.css("tableLayout")||"auto"},ma=E[0].style.width||"",na=E.css("minWidth")||"",oa=!1;C();var pa,qa=function(){(pa=y())()};qa();var ra=A(),sa=B();sa(ra("init"),!0);var ta=h.debounce(function(){sa(ra("windowScrollDone"),!1)},300),ua=function(){sa(ra("windowScroll"),!1),ta()},va=function(){sa(ra("containerScroll"),!1)},wa=function(){q(),C(),qa(),ra=A(),(sa=B())(ra("resize"),!0,!0)},xa=h.debounce(function(){C(),q(),qa(),ra=A(),sa(ra("reflow"),!0)},1);if(O?P?N.on(c("scroll"),va):(N.on(c("scroll"),va),o.on(c("scroll"),ua)):o.on(c("scroll"),ua),o.on(c("load"),xa),b(s.debounceResizeMs,c("resize"),wa),E.on("reflow",xa),f(E)&&E.on("filter",xa).on("sort",xa).on("page",xa),i){var ya=N.length?N[0]:E[0];p=new MutationObserver(function(a){for(var b=function(a){return a&&a[0]&&"THEAD"==a[0].nodeName},c=0;c<a.length;c++)if(!b(a[c].addedNodes)&&!b(a[c].removedNodes)){xa();break}}),p.observe(ya,{childList:!0,subtree:!0})}E.data("floatThead-attached",{destroy:function(){var a=".fth-"+D;u(),E.css(la),Z.remove(),n&&T.remove(),ca.parent().length&&ca.replaceWith(F),i&&(p.disconnect(),p=null),E.off("reflow"),N.off(a),U&&(N.length?N.unwrap():E.unwrap()),E.css("minWidth",na),aa.remove(),E.data("floatThead-attached",!1),o.off(a)},reflow:function(){xa()},setHeaderHeight:function(){k()},getFloatContainer:function(){return aa},getRowGroups:function(){return J?aa.children("thead").add(E.children("tbody,tfoot")):E.children("thead,tbody,tfoot")}})}),this}}(jQuery);