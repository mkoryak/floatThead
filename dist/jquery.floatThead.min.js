// @preserve jQuery.floatThead 1.2.10 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2014 Misha Koryak
// @license MIT
!function(a){function b(a,b,c){if(8==h){var d=l.width(),e=f.debounce(function(){var a=l.width();d!=a&&(d=a,c())},a);l.on(b,e)}else l.on(b,f.debounce(c,a))}function c(a){window.console&&window.console&&window.console.log&&window.console.log(a)}function d(){var b=a('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>');a("body").append(b);var c=b.innerWidth(),d=a("div",b).innerWidth();return b.remove(),c-d}function e(a){if(a.dataTableSettings)for(var b=0;b<a.dataTableSettings.length;b++){var c=a.dataTableSettings[b].nTable;if(a[0]==c)return!0}return!1}a.floatThead=a.floatThead||{},a.floatThead.defaults={cellTag:null,headerCellSelector:"tr:first>th:visible",zIndex:1001,debounceResizeMs:10,useAbsolutePositioning:!0,scrollingTop:0,scrollingBottom:0,scrollContainer:function(){return a([])},getSizingRow:function(a){return a.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,enableAria:!1,autoReflow:!1,debug:!1};var f=window._,g="undefined"!=typeof MutationObserver,h=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];a=1+a,b.innerHTML="<!--[if gt IE "+a+"]><i><![endif]-->",c[0];);return a>4?a:document.documentMode}(),i=/Gecko\//.test(navigator.userAgent),j=/WebKit\//.test(navigator.userAgent),k=!i&&!h,l=a(window);a.fn.floatThead=function(i){if(i=i||{},!f&&(f=window._||a.floatThead._,!f))throw new Error("jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore.");if(8>h)return this;k&&(document.createElement("fthtr"),document.createElement("fthtd"),document.createElement("fthfoot"));var m=null;if(f.isString(i)){var n=i,o=this;return this.filter("table").each(function(){var b=a(this).data("floatThead-attached");if(b&&f.isFunction(b[n])){var c=b[n]();"undefined"!=typeof c&&(o=c)}}),o}var p=a.extend({},a.floatThead.defaults||{},i);return a.each(i,function(b){b in a.floatThead.defaults||!p.debug||c("jQuery.floatThead: used ["+b+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+f.keys(a.floatThead.defaults).join(", "))}),this.filter(":not(."+p.floatTableClass+")").each(function(){function c(a){return a+".fth-"+A+".floatTHead"}function i(){var b=0;C.find("tr:visible").each(function(){b+=a(this).outerHeight(!0)}),ab.outerHeight(b),bb.outerHeight(b)}function n(){var a=B.outerWidth(),b=K.width()||a,c="hidden"!=K.css("overflow-y")?b-H.vertical:b;if(Z.width(c),Q){var d=100*a/c;U.css("width",d+"%")}else U.outerWidth(a)}function o(){E=(f.isFunction(p.scrollingTop)?p.scrollingTop(B):p.scrollingTop)||0,F=(f.isFunction(p.scrollingBottom)?p.scrollingBottom(B):p.scrollingBottom)||0}function q(){var b,c;if(X)b=W.find("col").length;else{var d;if(d=null==p.cellTag&&p.headerCellSelector?p.headerCellSelector:"tr:first>"+p.cellTag,f.isNumber(d))return d;c=C.find(d),b=0,c.each(function(){b+=parseInt(a(this).attr("colspan")||1,10)})}if(b!=J){J=b;for(var e,g=[],h=[],i=[],j=0;b>j;j++)g.push(p.enableAria&&(e=c.eq(j).text())?'<th scope="col" class="floatThead-col">'+e+"</th>":'<th class="floatThead-col"/>'),h.push("<col/>"),i.push("<fthtd style='display:table-cell;height:0;width:auto;'/>");h=h.join(""),g=g.join(""),k&&(i=i.join(""),Y.html(i),eb=Y.find("fthtd")),ab.html(g),bb=ab.find("th"),X||W.html(h),cb=W.find("col"),V.html(h),db=V.find("col")}return b}function r(){if(!G){if(G=!0,L){var a=B.width(),b=S.width();a>b&&B.css("minWidth",a)}B.css(hb),U.css(hb),U.append(C),D.before(_),i()}}function s(){G&&(G=!1,L&&B.width(jb),_.detach(),B.prepend(C),B.css(ib),U.css(ib),B.css("minWidth",kb),B.css("minWidth",B.width()))}function t(a){L!=a&&(L=a,Z.css({position:L?"absolute":"fixed"}))}function u(a,b,c,d){return k?c:d?p.getSizingRow(a,b,c):b}function v(){var a,b=q();return function(){cb=W.find("col");var c=u(B,cb,eb,h);if(c.length==b&&b>0){if(!X)for(a=0;b>a;a++)cb.eq(a).css("width","");s();var d=[];for(a=0;b>a;a++)d[a]=c.get(a).offsetWidth;for(a=0;b>a;a++)db.eq(a).width(d[a]),cb.eq(a).width(d[a]);r()}else U.append(C),B.css(ib),U.css(ib),i()}}function w(a){var b=K.css("border-"+a+"-width"),c=0;return b&&~b.indexOf("px")&&(c=parseInt(b,10)),c}function x(){var a,b=K.scrollTop(),c=0,d=N?M.outerHeight(!0):0,e=O?d:-d,f=Z.height(),g=B.offset(),h=0;if(Q){var i=K.offset();c=g.top-i.top+b,N&&O&&(c+=d),c-=w("top"),h=w("left")}else a=g.top-E-f+F+H.horizontal;var k=l.scrollTop(),m=l.scrollLeft(),n=K.scrollLeft();return b=K.scrollTop(),function(i){var o=B[0].offsetWidth<=0&&B[0].offsetHeight<=0;if(!o&&$)return $=!1,setTimeout(function(){B.trigger("reflow")},1),null;if(o&&($=!0,!L))return null;if("windowScroll"==i?(k=l.scrollTop(),m=l.scrollLeft()):"containerScroll"==i?(b=K.scrollTop(),n=K.scrollLeft()):"init"!=i&&(k=l.scrollTop(),m=l.scrollLeft(),b=K.scrollTop(),n=K.scrollLeft()),!j||!(0>k||0>m)){if(T)t("windowScrollDone"==i?!0:!1);else if("windowScrollDone"==i)return null;g=B.offset(),N&&O&&(g.top+=d);var p,q,u=B.outerHeight();if(Q&&L){if(c>=b){var v=c-b;p=v>0?v:0}else p=R?0:b;q=h}else!Q&&L?(k>a+u+e?p=u-f+e:g.top>k+E?(p=0,s()):(p=E+k-g.top+c+(O?d:0),r()),q=0):Q&&!L?(c>b||b-c>u?(p=g.top-k,s()):(p=g.top+b-k-c,r()),q=g.left+n-m):Q||L||(k>a+u+e?p=u+E-k+a+e:g.top>k+E?(p=g.top-k,r()):p=E,q=g.left-m);return{top:p,left:q}}}}function y(){var a=null,b=null,c=null;return function(d,e,f){null==d||a==d.top&&b==d.left||(Z.css({top:d.top,left:d.left}),a=d.top,b=d.left),e&&n(),f&&i();var g=K.scrollLeft();L&&c==g||(Z.scrollLeft(g),c=g)}}function z(){if(K.length){var a=K.width(),b=K.height(),c=B.height(),d=B.width(),e=d>a?I:0,f=c>b?I:0;H.horizontal=d>a-f?I:0,H.vertical=c>b-e?I:0}}var A=f.uniqueId(),B=a(this);if(B.data("floatThead-attached"))return!0;if(!B.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');g=p.autoReflow&&g;var C=B.find("thead:first"),D=B.find("tbody:first");if(0==C.length)throw new Error("jQuery.floatThead must be run on a table that contains a <thead> element");var E,F,G=!1,H={vertical:0,horizontal:0},I=d(),J=0,K=p.scrollContainer(B)||a([]),L=p.useAbsolutePositioning;null==L&&(L=p.scrollContainer(B).length),L||(G=!0);var M=B.find("caption"),N=1==M.length;if(N)var O="top"===(M.css("caption-side")||M.attr("align")||"top");var P=a('<fthfoot style="display:table-footer-group;border-spacing:0;height:0;border-collapse:collapse;"/>'),Q=K.length>0,R=!1,S=a([]),T=9>=h&&!Q&&L,U=a("<table/>"),V=a("<colgroup/>"),W=B.find("colgroup:first"),X=!0;0==W.length&&(W=a("<colgroup/>"),X=!1);var Y=a('<fthrow style="display:table-row;border-spacing:0;height:0;border-collapse:collapse"/>'),Z=a('<div style="overflow: hidden;" aria-hidden="true"></div>'),$=!1,_=a("<thead/>"),ab=a('<tr class="size-row"/>'),bb=a([]),cb=a([]),db=a([]),eb=a([]);_.append(ab),B.prepend(W),k&&(P.append(Y),B.append(P)),U.append(V),Z.append(U),p.copyTableClass&&U.attr("class",B.attr("class")),U.attr({cellpadding:B.attr("cellpadding"),cellspacing:B.attr("cellspacing"),border:B.attr("border")});var fb=B.css("display");if(U.css({borderCollapse:B.css("borderCollapse"),border:B.css("border"),display:fb}),"none"==fb&&($=!0),U.addClass(p.floatTableClass).css("margin",0),L){var gb=function(a,b){var c=a.css("position"),d="relative"==c||"absolute"==c;if(!d||b){var e={paddingLeft:a.css("paddingLeft"),paddingRight:a.css("paddingRight")};Z.css(e),a=a.wrap("<div class='"+p.floatWrapperClass+"' style='position: relative; clear:both;'></div>").parent(),R=!0}return a};Q?(S=gb(K,!0),S.append(Z)):(S=gb(B),B.after(Z))}else B.after(Z);Z.css({position:L?"absolute":"fixed",marginTop:0,top:L?0:"auto",zIndex:p.zIndex}),Z.addClass(p.floatContainerClass),o();var hb={"table-layout":"fixed"},ib={"table-layout":B.css("tableLayout")||"auto"},jb=B[0].style.width||"",kb=B.css("minWidth")||"";z();var lb,mb=function(){(lb=v())()};mb();var nb=x(),ob=y();ob(nb("init"),!0);var pb=f.debounce(function(){ob(nb("windowScrollDone"),!1)},300),qb=function(){ob(nb("windowScroll"),!1),pb()},rb=function(){ob(nb("containerScroll"),!1)},sb=function(){o(),z(),mb(),nb=x(),(ob=y())(nb("resize"),!0,!0)},tb=f.debounce(function(){z(),o(),mb(),nb=x(),ob(nb("reflow"),!0)},1);if(Q?L?K.on(c("scroll"),rb):(K.on(c("scroll"),rb),l.on(c("scroll"),qb)):l.on(c("scroll"),qb),l.on(c("load"),tb),b(p.debounceResizeMs,c("resize"),sb),B.on("reflow",tb),e(B)&&B.on("filter",tb).on("sort",tb).on("page",tb),g){var ub=K.length?K[0]:B[0];m=new MutationObserver(function(a){for(var b=function(a){return a&&a[0]&&"THEAD"==a[0].nodeName},c=0;c<a.length;c++)if(!b(a[c].addedNodes)&&!b(a[c].removedNodes)){tb();break}}),m.observe(ub,{childList:!0,subtree:!0})}B.data("floatThead-attached",{destroy:function(){var a=".fth-"+A;s(),B.css(ib),W.remove(),k&&P.remove(),_.parent().length&&_.replaceWith(C),g&&(m.disconnect(),m=null),B.off("reflow"),K.off(a),R&&(K.length?K.unwrap():B.unwrap()),B.css("minWidth",kb),Z.remove(),B.data("floatThead-attached",!1),l.off(a)},reflow:function(){tb()},setHeaderHeight:function(){i()},getFloatContainer:function(){return Z},getRowGroups:function(){return G?Z.find("thead").add(B.find("tbody,tfoot")):B.find("thead,tbody,tfoot")}})}),this}}(jQuery),function(a){a.floatThead=a.floatThead||{},a.floatThead._=window._||function(){var b={},c=Object.prototype.hasOwnProperty,d=["Arguments","Function","String","Number","Date","RegExp"];b.has=function(a,b){return c.call(a,b)},b.keys=function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[];for(var d in a)b.has(a,d)&&c.push(d);return c};var e=0;return b.uniqueId=function(a){var b=++e+"";return a?a+b:b},a.each(d,function(){var a=this;b["is"+a]=function(b){return Object.prototype.toString.call(b)=="[object "+a+"]"}}),b.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},b}()}(jQuery);