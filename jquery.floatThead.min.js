/*
 jQuery.floatThead 0.9.7
 Copyright (c) 2012 Misha Koryak - https://github.com/mkoryak/floatThead
 Licensed under Creative Commons Attribution-NonCommercial 3.0 Unported - http://creativecommons.org/licenses/by-sa/3.0/
 */
(function(a){function da(d,a){var e=c.width(),ea=_.debounce(function(){var d=c.width();e!=d&&(e=d,a())},d);c.bind("resize.floatTHead",ea)}function fa(){var d=a("<div/>").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:-1E3}).prependTo("body").append("<div/>").find("div").css({width:"100%",height:200}),c=100-d.width();d.parent().remove();return c}function ga(d){if(d.dataTableSettings)for(var a=0;a<d.dataTableSettings.length;a++)if(d[0]==d.dataTableSettings[a].nTable)return!0;
  return!1}var U=function(){for(var a=3,c=document.createElement("b"),e=c.all||[];c.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i><![endif]--\x3e",e[0];);return 4<a?a:document.documentMode}(),L=function(){var d=a("<table><colgroup><col></colgroup><tbody><tr><td style='width:10px'></td></tbody></table>");a("body").append(d);var c=d.find("col").width();d.remove();return 0==c}();a.floatThead={defaults:{cellTag:"th",zIndex:1001,debounceResizeMs:1,useAbsolutePositioning:!0,scrollingTop:0,scrollingBottom:0,scrollContainer:function(d){return a([])},
  getSizingRow:function(a,c){return L?a.find("tbody tr:visible:first>td"):c},floatTableClass:"floatThead-table"}};var c=a(window),M=0;a.fn.floatThead=function(d){if(8>U)return this;if(_.isString(d)){var D=this;this.filter("table").each(function(){var c=a(this).data("floatThead-attached");c&&_.isFunction(c[d])&&(r=c[d](),"undefined"!==typeof r&&(D=r))});return D}var e=a.extend({},a.floatThead.defaults,d);this.filter(":not(."+e.floatTableClass+")").each(function(){function d(){var s=p.outerHeight(!0);
  E.outerHeight(s);ha.outerHeight(s)}function K(){v=(_.isFunction(e.scrollingTop)?e.scrollingTop(b):e.scrollingTop)||0;V=(_.isFunction(e.scrollingBottom)?e.scrollingBottom(b):e.scrollingBottom)||0}function D(){var s=p.find("tr:first>"+e.cellTag),s=_.reduce(s,function(b,s){var c=parseInt(a(s).attr("colspan")||1,10);return b+c},0);if(s!=W){W=s;for(var b=[],c=[],f=0;f<s;f++)b.push("<"+e.cellTag+' class="floatThead-col-'+f+'"/>'),c.push("<col/>");c=c.join("");b=b.join("");E.html(b);z=E.find(">"+e.cellTag);
  G.html(c);z=G.find("col");N.html(c);O=N.find("col")}return s}function H(){I||(I=!0,b.css(X),g.css(X),g.append(p),L.before(A),d())}function J(){I&&(I=!1,A.detach(),b.prepend(p),b.css(B),g.css(B))}function Y(b){k!=b&&(k=b,l.css({position:k?"absolute":"fixed"}))}function P(){var c=D();return function(){var a=!1,F=e.getSizingRow(b,z);if(F.length==c&&0<c){J();for(var f=0;f<c;f++){var h=F.eq(f).outerWidth(!0);O.eq(f).outerWidth(h);z.eq(f).outerWidth(h)}H();for(f=0;f<c;f++)if(F=O.eq(f).outerWidth(!0),h=
  z.eq(f).outerWidth(!0),F!=h){a=!0;break}}else g.append(p),b.css(B),g.css(B),d();return a}}function Q(){var a=m.scrollTop(),d,e=0,f=l.height(),h=b.offset();if(u)var g=m.offset(),e=h.top-g.top+a;else d=h.top-v-f+V+C.horizontal;var t=c.scrollTop(),p=c.scrollLeft(),q=m.scrollLeft(),a=m.scrollTop();return function(n){"windowScroll"==n?(t=c.scrollTop(),p=c.scrollLeft()):"containerScroll"==n?(a=m.scrollTop(),q=m.scrollLeft()):"init"!=n&&(t=c.scrollTop(),p=c.scrollLeft(),a=m.scrollTop(),q=m.scrollLeft());
  if(ia)"windowScrollDone"==n?Y(!0):Y(!1);else if("windowScrollDone"==n)return null;h=b.offset();var g,l;u&&k?(e>=a?(n=e-a,g=0<n?n:0):g=Z?0:a,l=0):!u&&k?(n=b.outerHeight(),t>d+n?g=n-f:h.top>t+v?(g=0,J()):(g=v+t-h.top+e,H()),l=0):u&&!k?(e>a?(g=h.top-t,J()):(g=h.top+a-t-e,H()),l=h.left+q-p):u||k||(n=b.outerHeight(),t>d+n?(g=n+v-t+d,J()):h.top>t+v?(g=h.top-t,H()):g=v,l=h.left-p);return{top:g,left:l}}}function $(){var a=null,c=null,e=null;return function(f,h,k){null==f||a==f.top&&c==f.left||(l.css({top:f.top,
  left:f.left}),a=f.top,c=f.left);h&&(f=b.outerWidth(),h=m.width()||f,l.width(h-C.vertical),u?g.css("width",100*f/(h-C.vertical)+"%"):g.outerWidth(f));k&&d();k=m.scrollLeft();e!=k&&(l.scrollLeft(k),e=k)}}function R(){m.length&&(C.horizontal=m.width()<b.width()?aa:0,C.vertical=m.height()<b.height()?aa:0)}var b=a(this);if(b.data("floatThead-attached"))return!0;if(!b.is("table"))throw Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');var p=b.find("thead:first"),L=
  b.find("tbody:first");if(0==p.length)throw Error("jQuery.floatThead must be run on a table that contains a <thead> element");var I=!0,v,V,C={vertical:0,horizontal:0},aa=fa(),W=0,m=e.scrollContainer(b)||a([]),k=e.useAbsolutePositioning;null==k&&(k=e.scrollContainer(b).length);var u=0<m.length,Z=!1,ia=U&&!u&&k,g=a("<table/>"),N=a("<colgroup/>"),G=a("<colgroup/>"),l=a('<div style="overflow: hidden;"></div>'),A=a("<thead/>"),E=a('<tr class="size-row"/>'),ha=a([]),z=a([]),O=a([]);A.append(E);p.detach();
  b.prepend(A);b.prepend(G);g.append(N);l.append(g);g.attr("class",b.attr("class"));g.addClass(e.floatTableClass).css("margin",0);if(k){var ba=function(a,c){var b=a.css("position");if("relative"!=b&&"absolute"!=b||c)b={paddingLeft:a.css("paddingLeft"),paddingRight:a.css("paddingRight")},l.css(b),a=a.wrap("<div style='position: relative; clear:both;'></div>").parent(),Z=!0;return a};u?ba(m,!0).append(l):(ba(b),b.after(l))}else b.after(l);l.css({position:k?"absolute":"fixed",marginTop:0,top:k?0:"auto",
    zIndex:e.zIndex});K();var X={"table-layout":"fixed"},B={"table-layout":b.css("tableLayout")||"auto"};R();var w=P();w();var q=Q(),x=$();x(q("init"),!0);var ja=_.debounce(function(){x(q("windowScrollDone"),!1)},300),S=function(){x(q("windowScroll"),!1);ja()},T=function(){x(q("containerScroll"),!1)},ca=function(){K();R();w=P();w()&&w();q=Q();x=$();x(q("resize"),!0,!0)},y=_.debounce(function(){R();K();w=P();w()&&w();q=Q();x(q("reflow"),!0)},1);u?k?m.bind("scroll.floatTHead",T):(m.bind("scroll.floatTHead",
    T),c.bind("scroll.floatTHead",S)):c.bind("scroll.floatTHead",S);c.bind("load.floatTHead",y);da(e.debounceResizeMs,ca);b.bind("reflow",y);ga(b)&&b.bind("filter",y).bind("sort",y).bind("page",y);b.data("floatThead-attached",{destroy:function(){b.css(B);G.remove();A.replaceWith(p);b.unbind("reflow");y=ca=T=S=function(){};m.unbind("scroll.floatTHead");l.remove();b.data("floatThead-attached",!1);M--;0==M&&(c.unbind("scroll.floatTHead"),c.unbind("resize.floatTHead"),c.unbind("load.floatTHead"))},reflow:function(){y()},
    setHeaderHeight:function(){d()},getFloatContainer:function(){return l}});M++});return this}})(jQuery);